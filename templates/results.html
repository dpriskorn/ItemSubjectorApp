<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ItemSubjectorApp - Results</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

{% include 'navbar.html' %}

<div class="container mt-4">
    <h1>CirrusSearch query results in Wikidata</h1>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Query</th>
                <th scope="col"># of results</th>
                <th scope="col">Has been run</th>
            </tr>
        </thead>
        {{ queries | safe }}
    </table>
    <p>Results: {{item_count}}</p>
</div>

<div class="container mt-4">
    <form action="add-main-subject" method="post" target="_blank">
        <h1>Working on <b>{{ label }}</b> (<a href="{{ link }}">{{ qid }}</a>)</h1>
        <input name="main_subject" type="hidden" value="{{ qid }}">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th scope="col">Number</th>
                    <th scope="col">
                        <input type="checkbox" class="toggle-all-checkbox">
                    </th>
                    <th scope="col">Label</th>
                    <th scope="col">Instance of (P31)</th>
                    <th scope="col">Publication</th>
                    <th scope="col">DOI</th>
                    <th scope="col">Link to full resource</th>
                </tr>
            </thead>
            <tbody>
                {{ article_rows | safe }}
                <!-- Add more rows as needed -->
            </tbody>
        </table>
        <p><input type="checkbox" id="checkAll"> Check all checkboxes</p>
        <button type="submit" class="btn btn-primary mt-3">Send to QuickStatements</button>
    </form>
</div>

<!--Checkbox script-->
<script>
    document.querySelector('.toggle-all-checkbox').addEventListener('change', function () {
        var checkboxes = document.querySelectorAll('tbody input[type="checkbox"]');
        checkboxes.forEach(function (checkbox) {
            checkbox.checked = !checkbox.checked;
        });
    });
    document.getElementById('checkAll').addEventListener('change', function () {
        var checkboxes = document.querySelectorAll('tbody input[type="checkbox"]');
        checkboxes.forEach(function (checkbox) {
            checkbox.checked = document.getElementById('checkAll').checked;
        });
    });
</script>

{% include 'footer.html' %}

</body>
</html>
